{{ define "header" }}

<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css" rel="stylesheet" />
</head>
<header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top bg-light navbar-light">
        <div class="container">
            <a class="navbar-brand" href="/">Волонтерский центр</a>
            <button
                    class="navbar-toggler"
                    type="button"
                    data-mdb-toggle="collapse"
                    data-mdb-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
            >
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li hidden class="nav-item">
                        <a class="nav-link mx-2" href="#!">Post</a>
                    </li>
                    <li hidden class="nav-item">
                        <a class="nav-link mx-2" href="#!">Alerts</a>
                    </li>
                    <li hidden class="nav-item">
                        <a class="nav-link mx-2" href="#!">Trips</a>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="btn btn-light btn-rounded" href="/auth/sign-up">Регистрация</a>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="btn btn-dark btn-rounded" href="/auth/sign-in">Авторизация</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Navbar -->
</header>

<script>
    function authModule() {
        const authOrigins = ["http://localhost:8080"];
        let token = '';

        this.setToken = (value) => {
            token = value
        }

        this.fetch = (resource, options) => {
            let req = new Request(resource, options);
            destOrigin = new URL(req.url).origin;
            if (token && authOrigins.includes(destOrigin)) {
                req.headers.set("Authorization", "Bearer " + token);
            }
            return fetch(req)
        }
    }

    const auth = new authModule();
</script>

{{ end }}